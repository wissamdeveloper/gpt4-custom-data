"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBufferString = exports.getInputValue = exports.BaseMemory = void 0;
class BaseMemory {
}
exports.BaseMemory = BaseMemory;
const getInputValue = (inputValues, inputKey) => {
    if (inputKey !== undefined) {
        return inputValues[inputKey];
    }
    const keys = Object.keys(inputValues);
    if (keys.length === 1) {
        return inputValues[keys[0]];
    }
    throw new Error(`input values have multiple keys, memory only supported when one key currently: ${keys}`);
};
exports.getInputValue = getInputValue;
function getBufferString(messages, human_prefix = "Human", ai_prefix = "AI") {
    const string_messages = [];
    for (const m of messages) {
        let role;
        if (m._getType() === "human") {
            role = human_prefix;
        }
        else if (m._getType() === "ai") {
            role = ai_prefix;
        }
        else if (m._getType() === "system") {
            role = "System";
        }
        else if (m._getType() === "generic") {
            role = m.role;
        }
        else {
            throw new Error(`Got unsupported message type: ${m}`);
        }
        string_messages.push(`${role}: ${m.text}`);
    }
    return string_messages.join("\n");
}
exports.getBufferString = getBufferString;
